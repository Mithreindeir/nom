#Structures in nom can have function pointers as members that reference themselves using "acc"
deposit = function(acc, v):
	acc.balance = acc.balance + v
end

withdraw = function(acc, v):
	if acc.balance < v:
		print("Insufficient funds\n")
		return 0
	end
	acc.balance = acc.balance - v
end

show = function(acc):
	print("Name: ", acc.name, " Balance: ", acc.balance, " \n")
end

new_acc = function(name, m):
	acc.name = name
	acc.balance = m
	return acc
end

#You can arbitrarily create arrays with any data types
a = array()
a[0] = new_acc("john", 100)
a[1] = new_acc("mike", 1000)
a[2] = new_acc("bill", 10000)

show(a[0])
show(a[1])
show(a[2])

loop = 1
while loop:
	print("What name is on the account?  ")
	name = input()
	num = 0
	if name == "mike":
		num = 1
	end
	elseif name == "bill":
		num = 2
	end
	print("What a action do you want to do?\n")
	print("A: Withdraw\nB: Deposit\n")
	action = input()
	if action == "a" or action == "A":
		print("How much?")
		amount = input()
		withdraw(a[num], amount)
	end
	elseif action == "b" or action == "B":
		print("How much?")
		amount = input()
		deposit(a[num], amount)
	end
	else:
		loop = 0
	end
	show(a[num])
	print("\n")
end

print(a[0].balance, "\n")
print(a[1].balance, "\n")
print(a[2].balance, "\n")